---
title: Hexoåšå®¢æ­å»ºåŠä½¿ç”¨
urlname: hexo-tutorial
mathjax: true
date: 2022-05-21 22:50:28
toc: true
tags:
- hexo
---

åœ¨ä½¿ç”¨ Hexo æ­å»ºåšå®¢çš„è¿‡ç¨‹ä¸­æŠ˜è…¾äº†å¥½ä¹…ï¼Œå°¤å…¶æ˜¯å®‰è£…ä¸»é¢˜çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›å‘ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚

<!-- more -->

## å¸¸ç”¨å‘½ä»¤

```bash
# åˆ›å»ºæ–‡ç« 
$ hexo new post <title>
# åˆ›å»ºèœå•é¡µ
$ hexo new page <title>
# ç”Ÿæˆé™æ€æ–‡ä»¶
$ hexo g #ç”Ÿæˆçš„æ–‡ä»¶åœ¨ public ç›®å½•ä¸‹
# å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
$ hexo s
# æ‰‹åŠ¨éƒ¨ç½²
$ hexo d
# æ¸…é™¤é™æ€æ–‡ä»¶
$ hexo clean
```

## å®‰è£…
å®‰è£…`Hexo`çš„è¿‡ç¨‹å¾ˆç®€å•ï¼Œè·Ÿç€ [å®˜æ–¹æ–‡æ¡£](https://hexo.io/zh-cn/docs/) æ“ä½œå°±å¥½ï¼Œ`Node`å®‰è£…14ç‰ˆæœ¬çš„ï¼ˆå¦åˆ™åé¢å®‰è£…ä¸»é¢˜çš„æ—¶å€™æœ‰å‘ï¼‰ã€‚
```bash
# node
$ brew install node@14
# hexo
$ npm install -g hexo-cli
```
å®‰è£…`hexo-server`æ¨¡å—
```bash
$ npm install hexo-server --save
```

> *å†™æ–‡ç« æ¨èä½¿ç”¨ VSCode*

## å»ºç«™&éƒ¨ç½²

### åˆå§‹åŒ–
è¿™ä¸ªä¹ŸæŒ‰ç…§[å®˜æ–¹æ–‡æ¡£](https://hexo.io/zh-cn/docs/setup)æ“ä½œå°±å¥½ã€‚
```bash
$ hexo init <folder>
$ cd <folder>
$ npm install #å®‰è£…ä¾èµ–æ¨¡å—
```

### é…ç½®
åœ¨é…ç½®æ–‡ä»¶`_config.yaml`ä¸­ä¿®æ”¹é…ç½®ä¿¡æ¯ã€‚

#### è®¾ç½®ç½‘ç«™ä¿¡æ¯
```yml
# Site
title: åšå®¢ç½‘ç«™æ ‡é¢˜
subtitle: 'å‰¯æ ‡é¢˜ï¼ˆä¼šå‡ºç°åœ¨æ ‡é¢˜ä¸‹é¢çš„ä¸€è¡Œå°å­—ï¼‰'
description: 'ç½‘ç«™æè¿°'
keywords:
author: ä½œè€…
language: zh-CN
timezone: Asia/Shanghai
```

#### è®¾ç½®ç½‘ç«™åœ°å€
```yml
# URL
url: https://example.github.io/ ## è®¾ç½®ç½‘ç«™çš„urlï¼Œæ¯”å¦‚ github page çš„åœ°å€
permalink: :year/:month/:urlname.html #è®¾ç½®æ–‡ç« çš„ url æ ¼å¼
permalink_defaults:
  urlname: index
pretty_urls:
  trailing_index: true # Set to false to remove trailing 'index.html' from permalinks
  trailing_html: false # Set to false to remove trailing '.html' from permalinks
```

#### è®¾ç½®å‘å¸ƒæ–¹å¼
è¿™é‡Œå…ˆé…ç½®æˆç”¨`git`å‘å¸ƒï¼Œåé¢ä¼šä½¿ç”¨`TravisCI`è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²
```yml
# Deployment
## Docs: https://hexo.io/docs/one-command-deployment
deploy:
  type: git
  repository: git@github.com:[url_to_your_repository].git
  branch: [your_git_branch]
```
#### æ”¯æŒæ•°å­¦å…¬å¼
åœ¨é…ç½®æ–‡ä»¶é‡ŒåŠ ä¸‹é¢è¿™è¡ŒğŸ‘‡ï¼Œç„¶ååœ¨æ–‡ç« å‰è¨€åŠ `mathjax: true`
```yml
# Math jax
## å—å…¬å¼ï¼š$$...$$ å•è¡Œå…¬å¼ï¼š$..$
mathjax: true 
```

#### è¯­æ³•é«˜äº®
```yml
highlight:
  enable: true
  line_number: true
  auto_detect: true
  tab_replace: ''
  wrap: true
  hljs: false
```

#### ä¿®æ”¹æ–‡ç« æ¨¡æ¿
æ¨¡æ¿æ–‡ä»¶åœ¨`scaffolds/post.md`
```markdown
---
title: {{ title }} <!-- æ–‡ç« æ˜¾ç¤ºçš„æ ‡é¢˜ -->
date: {{ date }} <!-- æ–‡ç« åˆ›å»ºæ—¶é—´ -->
urlname: {{ title }} <!-- è‡ªå®šä¹‰æ–‡ç« urlåå­— -->
mathjax: true  <!-- æ”¯æŒæ•°å­¦å…¬å¼ -->
tags:
---
```

### éƒ¨ç½²
æˆ‘ä½¿ç”¨äº†`TravisCI`è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒåˆ°`GitHub Pages`ã€‚

é¦–å…ˆå¾—æœ‰ä¸€ä¸ªå¸¦ [Github Pages](https://pages.github.com/) çš„é¡¹ç›®ï¼Œç„¶åæŒ‰ç…§ [è¿™ä¸ªæ•™ç¨‹](https://hexo.io/zh-cn/docs/github-pages) é…ç½®`Hexo`å‘å¸ƒåˆ°`Github Pages`ã€‚

**è¿™ä¸€æ­¥é‡åˆ°çš„å‡ ä¸ªå‘ï¼š**
1. è¦æœ‰ä¸€ä¸ªå•ç‹¬çš„é¡¹ç›®æˆ–è€…åˆ†æ”¯æ¥æ‰˜ç®¡`Github Pages`çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œå› ä¸º`TravisCI`å‘å¸ƒçš„æ—¶å€™ä¼šè¦†ç›–ç›®æ ‡çš„åˆ†æ”¯ã€‚
æˆ‘å°†åšå®¢ä»£ç å’Œå‘å¸ƒåˆ†æ”¯æ”¾åœ¨äº†åŒä¸€ä¸ªé¡¹ç›®çš„`main`åˆ†æ”¯å’Œ`gh-pages`åˆ†æ”¯ã€‚
![branchs](/images/gh-pages-branch.png)

2. `TravisCI`çš„`Node`ç‰ˆæœ¬ä¹Ÿè¦é€‰æ‹© 14ã€‚`.travis.yml`é…ç½®å¦‚ä¸‹ï¼š
```yml
sudo: false
dist: xenial #æŒ‡å®šubuntuå‘è¡Œç‰ˆUbuntu Xenial 16.04ï¼ˆé»˜è®¤ï¼‰
language: node_js
node_js:
  - 14 # use nodejs v14 LTS
cache: npm #ç¼“å­˜node_modulesæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯å¼€å¯çš„
branches:
  only:
    - main # build master branch only
install: # å®‰è£…ä¾èµ–é˜¶æ®µï¼Œé»˜è®¤æ˜¯npm install
  - npm install -g hexo-cli # åœ¨ CI ç¯å¢ƒå†…å®‰è£… Hexo
  - npm install # åœ¨æ ¹ç›®å½•å®‰è£…ç«™ç‚¹éœ€è¦çš„ä¾èµ–
script: #buildé˜¶æ®µ
  - hexo generate # generate static files
deploy:
  provider: pages #ä½¿ç”¨github-pagesçš„å‘å¸ƒå·¥å…·æ¥å‘å¸ƒï¼Œé»˜è®¤æäº¤åˆ°gh-pagesåˆ†æ”¯
  skip_cleanup: true
  github_token: $GH_TOKEN
  keep_history: true #ä¸è¦†ç›–æäº¤å†å²ï¼Œå³ä¸ä½¿ç”¨git push --force
  on:
    branch: main
  local_dir: public
  target_branch: gh-pages
```

é…ç½®å®Œæˆä¹‹åï¼Œæœ¬åœ°å†™å¥½æ–‡ç« ï¼Œç„¶å`git push`åˆ°`GitHub`å°±ä¼šè‡ªåŠ¨è¿›è¡Œæ„å»ºå’Œå‘å¸ƒäº†ã€‚

## ä¸»é¢˜é…ç½®
ä¸»é¢˜é…ç½®æ˜¯æŠ˜è…¾æœ€ä¹…çš„éƒ¨åˆ†ï¼Œé€‰ä¸»é¢˜å°±é€‰äº†å¥½ä¹…ï¼Œæœ€ç»ˆé€‰æ‹©äº†[maupassant-hexo](https://github.com/tufu9441/maupassant-hexo)ã€‚

å®‰è£…å’Œé…ç½®è¿‡ç¨‹ [è¿™ä¸ªæ•™ç¨‹](https://www.haomwei.com/technology/maupassant-hexo.html) å†™å¾—å¾ˆè¯¦ç»†äº†ï¼Œå”¯ä¸€çš„å‘å°±æ˜¯æŸäº›æ’ä»¶åœ¨æ–°ç‰ˆæœ¬çš„`Node`ä¸­ä¸å…¼å®¹ï¼Œè§£å†³æ–¹æ³•ç®€å•ç²—æš´ï¼š`Node`ä½¿ç”¨14ç‰ˆæœ¬çš„ã€‚

å®‰è£…å‘½ä»¤ï¼š
```bash
$ git clone https://github.com/tufu9441/maupassant-hexo.git themes/maupassant  
$ npm install hexo-renderer-pug --save  
$ npm install hexo-renderer-sass --save  
```

ä¸»è¦çš„é…ç½®ï¼š
```yml
# 1. æ–‡ç« ç‰ˆæƒä¿¡æ¯
post_copyright:
  enable: true
  author: åå­—
  copyright_text:
# ç‰ˆæƒæ–‡å­—åœ¨ languages/zh-CN.yaml ä¸­ä¿®æ”¹
copyright_default_text: æœ¬ä½œå“é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">çŸ¥è¯†å…±äº«ç½²å 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼

# 2. è‡ªå®šä¹‰èœå•é¡µ
menu:
  - page: home
    directory: .
    icon: fa-home
  - page: archive
    directory: archives/
    icon: fa-archive
  - page: about
    directory: about/
    icon: fa-user

# 3. è‡ªå®šä¹‰å³è¾¹æ 
widgets: ## Six widgets in sidebar provided: search, category, tag, recent_posts, recent_comments and links.
  - search
  - tag
  - recent_posts
  - links

# 4. è‡ªå®šä¹‰å‹é“¾
links:
  - title: codedumpçš„ç½‘ç»œæ—¥å¿—
    url: https://www.codedump.info/post/20200122-series-pages/
  - title: Strike Freedom
    url: https://strikefreedom.top/
  ...
```

## å‚è€ƒ
1. [Hexoæ–‡æ¡£](https://hexo.io/zh-cn/docs/)
2. [Hexoç®€æ´ä¸»é¢˜æ¨è](https://www.haomwei.com/technology/maupassant-hexo.html)
3. [å°† Hexo éƒ¨ç½²åˆ° GitHub Pages](https://hexo.io/zh-cn/docs/github-pages)
4. [[Travis-CI] GitHub Pages Deployment](https://docs.travis-ci.com/user/deployment/pages/)
5. [[Travis-CI] Job Lifecycle](https://docs.travis-ci.com/user/job-lifecycle/)
6. [é€‰æ‹©ä¸€ä¸ªçŸ¥è¯†å…±äº«è®¸å¯åè®®](https://creativecommons.org/licenses/?lang=zh)
